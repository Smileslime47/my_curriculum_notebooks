[输入输出系统](../操作系统原理.md)
# IO设备和设备管理器
<!-- TOC -->

- [IO设备和设备管理器](#io设备和设备管理器)
  - [IO设备](#io设备)
    - [IO设备类型](#io设备类型)
    - [设备与控制器的接口](#设备与控制器的接口)
  - [设备控制器](#设备控制器)
    - [基本功能](#基本功能)
    - [组成](#组成)
  - [内存映像IO](#内存映像io)
    - [特定的IO指令](#特定的io指令)
    - [内存映像](#内存映像)
  - [IO通道](#io通道)
    - [特点](#特点)
    - [通道类型](#通道类型)
    - [瓶颈问题](#瓶颈问题)

<!-- /TOC -->
---
执行控制IO的电子部件称为设备控制器/适配器（adapter）  
小型机的控制器做成印刷电路卡的形式，称为控制卡/接口卡
大型机的计算机系统中有IO接口和IO处理机

---
## IO设备
### IO设备类型
* 按使用特性分类
    * 存储设备
    * IO设备
* 按传输速率分类
    * 低速设备
        * 键盘、鼠标、语音输入输出
    * 中速设备
        * 行式打印机、激光打印机
    * 高速设备
        * 光驱、磁盘

### 设备与控制器的接口
设备不与CPU直接通信，而是与设备控制器通信

![]()
* 数据信号线：设备与控制器之间传输数据信号
* 控制信号线：控制器向设备传输控制信号的通路
* 状态信号线：用于传送设备当前状态的信号

---
## 设备控制器 
### 基本功能
* 接受识别命令
* 数据交换
* 标识和报告设备状态
* 地址识别
* 数据缓冲区
* 差错控制

### 组成

---
## 内存映像IO
### 特定的IO指令
为每个控制寄存器分配一个IO端口（8——16bit整数）  
访问内存和设备需要两种不同的指令  
### 内存映像
在编址上不再区分内存单元地址和设备控制器的寄存器地址，都采用k  
当k处于0～n-1范围时，被认为是内存地址  
当k大于等于n时，被认为是某个控制器的寄存器地址

---
## IO通道 
### 特点
IO通道是一种特殊的处理机，具备执行IO指令的能力，并执行通道程序来执行IO操作
* 指令类型单一，局限于与IO操作有关的指令
* 没有自己的内存，通道执行的程序放在主机的内存中，与CPU共享内存

### 通道类型
* 字节多路通道
    * 一种按字节交叉方式工作的通道，含有许多非分配型子通道，数量从几十到几百个
        * 每一个子通道连接一台IO设备，控制该设备的IO操作
        * 这些子通道按时间片轮转方式共享主通道
    * 缺点：不适用链接高速设备
* 数组选择通道
    * 以成组方式工作，每次传送一批数据
    * 缺点：只有一个分配型子通道，在一段时间内只能执行一道通道程序
    * 适用于链接磁盘等高速IO设备
* 数组多路通道
    * 将数组选择通道和字节多路通道相结合形成的通道，含有多个非分配型子通道

### 瓶颈问题
通道成本昂贵，机器中设置的通道数量较少  
解决方法：
* 增加设备到主机的通路，而不是通道
