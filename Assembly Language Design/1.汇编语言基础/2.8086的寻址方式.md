
# 8086的寻址方式
<!-- TOC -->

- [8086的寻址方式](#8086的寻址方式)
  - [指令的基本格式](#指令的基本格式)
  - [寻址方式](#寻址方式)
    - [立即寻址](#立即寻址)
    - [寄存器寻址](#寄存器寻址)
    - [直接寻址](#直接寻址)
    - [寄存器间接寻址](#寄存器间接寻址)
    - [寄存器相对寻址](#寄存器相对寻址)
    - [基址变址寻址](#基址变址寻址)
    - [相对基址变址寻址](#相对基址变址寻址)
    - [物理地址计算](#物理地址计算)
  - [程序存储器寻址](#程序存储器寻址)
    - [段内寻址](#段内寻址)

<!-- /TOC -->
---
## 指令的基本格式
操作码+Nx操作数/地址码

分类：
* 零地址指令
* 一地址指令
* 二地址指令
* 三地址指令

对于**二地址指令**
* 操作数1为**目标**（DST）
* 操作数2为**源**（SRC）
* DST和SRC字长应一致

---
## 寻址方式
用XXXXH表示地址码时，无法推断字长应加类型（BYTE/WORD）

不能将内存的数据放到内存中，如：  
* MOV [BX],[SI]

### 立即寻址
操作数在指令中

* MOV AL,5
* MOV AL,3064H

只能用在SRC的寻址上，不能用于DST

### 寄存器寻址
操作数在寄存器中，指定寄存器编号

* MOV AL,CL
* MOV CX,DX

DST不能为CS，否则无法找到下一条指令

### 直接寻址
操作数在段中（缺省默认**数据段**）  
指令提供EA（偏移值），由指定寄存器的基址找到数据  
此时EA应表示为XS:[VALUE]

* MOV AX,[2000H]
* MOV AX,ES:[2000h]

### 寄存器间接寻址
类似直接寻址，但操作数指定寄存器（基址：BP/BX；变址：SI/DI），EA存于寄存器中

指定BX、SI、DI时默认为数据段（DS）  
指定BP时默认为堆栈段（SS）

* MOV AX,ES:[BX]

### 寄存器相对寻址
类似寄存器直接寻址，但操作数包括寄存器(R)和位移量(D)，EA=(R)+D  
即R寄存器内存放的地址+位移量

寄存器对应段同上，可用于数组遍历（D++）
* MOV AX,DISP[DI]
* MOV AX,[DI+DISP]

### 基址变址寻址
操作数指定基址寄存器($R_B$)和变址寄存器($R_I$)  
EA=($R_B$)+($R_I$)

* MOV AX,[BX][DI]
* MOV AX,[BX+DI]
* MOV AX,ES:[BX][SI]

### 相对基址变址寻址
类似基址变址寻址，但操作数包括基址寄存器、变址寄存器和位移量  
EA=($R_B$)+($R_I$)+D  
可用于二维数组的遍历

* MOV AX,DISP[BX][DI]
* MOV AX,DISP[BX+DI]
* MOV AX,[BX+SI+DISP]

### 物理地址计算
* 对于三种段寻址，物理地址=段地址（DS/SS）x16+EA
* 对于两种基址变址寻址，物理地址=($R_B$)+($R_I$),无段地址的左移

---
## 程序存储器寻址
### 段内寻址
* 直接段内寻址
  * 有效地址IP